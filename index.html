<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Gregory Schwing – Neurological Surgery</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      color: #ffffff;
      background-color: #111;
    }

    body::before {
      content: "";
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
      background: 
        url('pictures/cushing.jpg') center bottom / cover no-repeat,
        url('pictures/cushing_art.webp') left center / contain no-repeat,
        url('pictures/cushing_friends.jpg') right center / contain no-repeat,
        url('pictures/illustration-of-the-brain-and-spinal-cord.jpg') center top / cover no-repeat,
        url('pictures/flowers.jpg') left bottom / contain no-repeat,
        url('pictures/ICH_Basal_Ganglia.png') right bottom / contain no-repeat;
      opacity: 0.12;
      background-blend-mode: overlay;
      pointer-events: none;
    }

    header {
      text-align: center;
      padding: 3rem 1rem 1rem;
      background: rgba(0, 0, 0, 0.5);
    }

    header h1 {
      margin: 0;
      font-size: 3rem;
    }

    header p {
      font-size: 1.2rem;
      color: #ccc;
    }

    nav {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 1rem;
      background: rgba(0, 0, 0, 0.6);
      padding: 1rem;
    }

    nav a {
      color: #00c8ff;
      text-decoration: none;
      font-weight: bold;
      font-size: 1rem;
      padding: 0.5rem 1rem;
      border: 1px solid #00c8ff;
      border-radius: 4px;
      transition: all 0.3s ease;
    }

    nav a:hover {
      background: #00c8ff;
      color: #000;
    }

    main {
      padding: 2rem;
      max-width: 900px;
      margin: auto;
    }

    .featured-photo {
      text-align: center;
      margin-bottom: 1rem;
    }

    .featured-photo img {
      max-width: 300px;
      width: 100%;
      height: auto;
      border-radius: 12px;
      box-shadow: 0 0 15px rgba(0, 0, 0, 0.6);
    }

    .chatbox {
      background: rgba(0, 0, 0, 0.6);
      padding: 1rem;
      border-radius: 8px;
      margin-bottom: 2rem;
    }

    #chatLog {
      max-height: 300px;
      overflow-y: auto;
      margin-bottom: 0.5rem;
    }

    .chat-message {
      padding: 0.5rem;
      border-radius: 6px;
      margin: 0.25rem 0;
    }

    .user-message {
      background: #004b66;
      align-self: flex-end;
    }

    .ai-message {
      background: #222;
    }

    #userInput {
      width: calc(100% - 90px);
      padding: 0.5rem;
      border: none;
      border-radius: 4px;
    }

    button {
      padding: 0.5rem 1rem;
      margin-left: 0.5rem;
      border: none;
      border-radius: 4px;
      background: #00c8ff;
      color: #000;
      cursor: pointer;
      font-weight: bold;
    }

    section {
      margin-bottom: 2rem;
      background-color: rgba(0, 0, 0, 0.6);
      padding: 1.5rem;
      border-radius: 8px;
    }

    footer {
      text-align: center;
      padding: 1rem;
      color: #aaa;
      background: rgba(0, 0, 0, 0.7);
      font-size: 0.85rem;
    }
  </style>
</head>
<body>

  <header>
    <h1>Gregory Schwing, M.D., Ph.D.</h1>
    <p>Neurological Surgery – Research, History, and Practice</p>
  </header>

  <nav>
    <a href="cv.html">CV</a>
    <a href="photos.html">Photos</a>
    <a href="multimedia.html">Multimedia</a>
    <a href="library.html">Library</a>
    <a href="research.html">Research</a>
  </nav>

  <main>
    <div class="featured-photo">
      <img src="pictures/Schwing,Gregory.jpg" alt="Gregory Schwing Portrait" />
    </div>

    <!-- Embedded AI Assistant -->
    <div class="chatbox">
      <h3>Ask Dr. Schwing’s AI Assistant</h3>
      <div id="chatLog"></div>
      <div>
        <input id="userInput" type="text" placeholder="Type your question..." />
        <button onclick="sendMessage()">Send</button>
      </div>
    </div>

    <section>
      <h2>About</h2>
      <p>
        Welcome to my personal website. I am an aspiring neurological surgeon with a deep interest in the history and evolution of neurosurgical technique, visual documentation, and interdisciplinary research. This space brings together selected works, archives, and media to explore both past and present facets of the brain sciences.
      </p>
    </section>

    <section>
      <h2>Featured Work</h2>
      <p>
        Explore the Research and Library sections for annotated neurosurgical cases, publications, and a personal archive of books and papers that have shaped my thinking.
      </p>
    </section>
  </main>

  <footer>
    &copy; 2025 Gregory Schwing. All rights reserved.
  </footer>

  <!-- Gemini Assistant Script -->
  <script type="module">
    import { GoogleGenerativeAI } from "https://esm.run/@google/generative-ai";

    const API_KEY = "AIzaSyDAnv_Mxr5s-NnHYnQde-tLRn8jH39MA14";
    const genAI = new GoogleGenerativeAI(API_KEY);
    const model = genAI.getGenerativeModel({ model: "gemini-2.5-pro" });

    let conversationHistory = [];

    function appendMessage(sender, text) {
      const chatLog = document.getElementById("chatLog");
      const messageDiv = document.createElement("div");
      messageDiv.classList.add("chat-message", sender === "user" ? "user-message" : "ai-message");
      messageDiv.textContent = text;
      chatLog.appendChild(messageDiv);
      chatLog.scrollTop = chatLog.scrollHeight;
    }

    function trimHistory() {
      const maxMessages = 16;
      if (conversationHistory.length > maxMessages) {
        conversationHistory = conversationHistory.slice(-maxMessages);
      }
    }

    async function sendMessage() {
      const inputField = document.getElementById("userInput");
      const input = inputField.value.trim();
      if (!input) return;

      appendMessage("user", input);
      inputField.value = "";

      appendMessage("ai", "Thinking...");

      try {
        const chat = model.startChat({ history: conversationHistory });
        const result = await chat.sendMessage(input);
        const aiText = result.response.text();

        document.getElementById("chatLog").lastChild.textContent = aiText;

        conversationHistory.push({ role: "user", parts: [{ text: input }] });
        conversationHistory.push({ role: "model", parts: [{ text: aiText }] });
        trimHistory();

      } catch (err) {
        document.getElementById("chatLog").lastChild.textContent = "Error: " + err.message;
      }
    }

    window.sendMessage = sendMessage;
  </script>
</body>
</html>
